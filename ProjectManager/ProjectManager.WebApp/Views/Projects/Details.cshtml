@model ProjectManager.Domain.Project

@{
    ViewBag.Title = "Details project: " + Model.Name;
}
<div class="container">
    <h2>@ViewBag.Title</h2>
    <hr />
    <div class="row">
        @Html.LabelFor(model => model.Description)
        @Html.DisplayFor(model => model.Description)
    </div>
    <br />
    <div class="row">
        <h4>Members under this project:</h4>
        @if (Model.Members.Count == 0)
        {
            <h4>No members under this project.</h4>
        }
        else
        {
            <table class="table">
                <tr>
                    <th>
                        First name
                    </th>
                    <th>
                        Last name
                    </th>
                    <th>
                        E-mail adress
                    </th>
                    <th></th>
                </tr>
                @foreach (var item in Model.Members)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LastName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Email)
                        </td>
                        <td>
                            <a href="@Url.Action("RemoveUser", "Projects", new {userId = item.Id,projId=Model.Id})" class="btn btn-danger">Remove member</a>
                        </td>
                    </tr>
                }
            </table>
        }
    </div>
    <div class="row">
        <h4>Assignments under this project:</h4>
        @if (Model.Assignemnts.Count == 0)
        {
            <h4>No assignments under this project.</h4>
        }
        else
        {
            <table class="table">
                <tr>
                    <th>
                        Programist
                    </th>
                    <th>
                        Category
                    </th>
                    <th>
                        Owner
                    </th>
                    <th>
                        Priority
                    </th>
                    <th>
                        Project
                    </th>
                    <th>
                        Status
                    </th>
                    <th>
                        Assignment name
                    </th>
                    <th>
                        Assignment description
                    </th>
                    <th>
                       
                    </th>

                </tr>
                @foreach (var item in Model.Assignemnts)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.AssignedTo.Email)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Category.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Owner.Email)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Priority.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Project.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Description)
                        </td>
                        <td>
                            <a href="@Url.Action("Delete", "Assignments", new {id = item.Id,projId=Model.Id})" class="btn btn-danger">Delete</a>
                        </td>
                    </tr>
                }
            </table>
        }
    </div>
    <br/>
    <div class="text-center">
        <a href="@Url.Action("Edit", "Projects", new {id = Model.Id})" class="btn btn-primary">Edit</a>
        <a href="@Url.Action("CreateFromProject", "Assignments", new {id = Model.Id})" class="btn btn-primary">Add assignment</a>
        <a href="@Url.Action("GenerateReport", "Projects", new {id = Model.Id})" class="btn btn-primary">Generate raport</a>
    </div>
</div>    